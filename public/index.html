<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MeowSpeechKit-A - 垂直滚动提词器</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Auth Section -->
        <div id="auth-section" class="section">
            <div class="auth-container">
                <h1 class="app-title">MeowSpeechKit-A</h1>
                <p class="app-subtitle">垂直滚动提词器</p>
                
                <div class="auth-tabs">
                    <button class="auth-tab active" data-tab="login">登录</button>
                    <button class="auth-tab" data-tab="register">注册</button>
                </div>
                
                <form id="login-form" class="auth-form">
                    <div class="form-group">
                        <label for="login-username">用户名</label>
                        <input type="text" id="login-username" name="username" required minlength="3" placeholder="请输入用户名">
                    </div>
                    <div class="form-group">
                        <label for="login-password">密码</label>
                        <input type="password" id="login-password" name="password" required minlength="6" placeholder="请输入密码">
                    </div>
                    <button type="submit" class="btn btn-primary">登录</button>
                    <p id="login-error" class="error-message"></p>
                </form>
                
                <form id="register-form" class="auth-form hidden">
                    <div class="form-group">
                        <label for="register-username">用户名</label>
                        <input type="text" id="register-username" name="username" required minlength="3" placeholder="请输入用户名">
                    </div>
                    <div class="form-group">
                        <label for="register-password">密码</label>
                        <input type="password" id="register-password" name="password" required minlength="6" placeholder="请输入密码">
                    </div>
                    <div class="form-group">
                        <label for="register-confirm">确认密码</label>
                        <input type="password" id="register-confirm" name="confirm" required minlength="6" placeholder="请再次输入密码">
                    </div>
                    <button type="submit" class="btn btn-primary">注册</button>
                    <p id="register-error" class="error-message"></p>
                </form>
            </div>
        </div>

        <!-- Projects Section -->
        <div id="projects-section" class="section hidden">
            <header class="main-header">
                <h1 class="logo">MeowSpeechKit-A</h1>
                <div class="header-right">
                    <span id="projects-user-info"></span>
                    <span id="projects-rate-limit-info"></span>
                    <button id="projects-logout-btn" class="btn btn-secondary">退出登录</button>
                </div>
            </header>
            
            <main class="projects-content">
                <div class="projects-panel">
                    <h2>我的项目</h2>
                    <p class="projects-subtitle">选择一个项目继续，或创建新项目</p>
                    
                    <div class="projects-actions">
                        <button id="new-project-btn" class="btn btn-primary">新建项目</button>
                    </div>
                    
                    <div id="projects-list" class="projects-list">
                        <p class="placeholder-text">正在加载项目...</p>
                    </div>
                </div>
            </main>
        </div>

        <!-- Main Section -->
        <div id="main-section" class="section hidden">
            <header class="main-header">
                <h1 class="logo">MeowSpeechKit-A</h1>
                <div class="header-right">
                    <button id="back-to-projects-btn" class="btn btn-secondary">返回项目列表</button>
                    <span id="user-info"></span>
                    <span id="rate-limit-info"></span>
                    <button id="logout-btn" class="btn btn-secondary">退出登录</button>
                </div>
            </header>
            
            <main class="main-content">
                <div class="editor-panel">
                    <h2>演讲稿</h2>
                    <p id="current-project-name" class="current-project-name"></p>
                    
                    <div class="form-group">
                        <label for="script-title">项目标题</label>
                        <input type="text" id="script-title" placeholder="请输入项目标题">
                    </div>
                    
                    <div class="form-group">
                        <label for="script-content">演讲稿内容</label>
                        <textarea id="script-content" rows="10" placeholder="请在此输入或粘贴您的演讲稿..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="target-duration">目标时长（秒，可选）</label>
                        <input type="number" id="target-duration" min="10" placeholder="例如：300 表示5分钟">
                    </div>
                    
                    <div class="form-group">
                        <label for="model-select">AI 模型</label>
                        <select id="model-select"></select>
                    </div>
                    
                    <div class="button-group">
                        <button id="process-btn" class="btn btn-primary">AI 分词</button>
                        <button id="save-project-btn" class="btn btn-secondary">保存项目</button>
                        <button id="play-btn" class="btn btn-success" disabled>播放提词器</button>
                    </div>
                    
                    <div id="total-duration-info" class="total-duration-info hidden">
                        <span id="total-duration-text"></span>
                        <span id="speed-suggestion"></span>
                    </div>
                    
                    <div id="system-prompt-section" class="system-prompt-section">
                        <h3>系统提示词</h3>
                        <pre id="system-prompt-display"></pre>
                    </div>
                    
                    <div id="processing-status" class="processing-status hidden">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                        <p id="processing-text">处理中...</p>
                    </div>
                </div>
                
                <div class="preview-panel">
                    <h2>预览</h2>
                    <p class="preview-hint">点击条目可修改时长</p>
                    <div id="segments-preview" class="segments-preview">
                        <p class="placeholder-text">请先进行 AI 分词以查看分段</p>
                    </div>
                </div>
            </main>
        </div>

        <!-- Teleprompter Section (Fullscreen) -->
        <div id="teleprompter-section" class="section hidden">
            <div class="teleprompter-controls">
                <div class="control-group">
                    <label>字体大小</label>
                    <input type="range" id="font-size" min="24" max="120" value="48">
                    <span id="font-size-value">48px</span>
                </div>
                
                <div class="control-group">
                    <label>播放速度</label>
                    <input type="range" id="speed" min="0.5" max="2" step="0.1" value="1">
                    <span id="speed-value">1.0x</span>
                </div>
                
                <div class="control-group">
                    <label>候选行数 (n)</label>
                    <input type="range" id="candidate-lines" min="1" max="5" value="2">
                    <span id="candidate-lines-value">2</span>
                </div>
                
                <div class="control-group">
                    <label>深色模式</label>
                    <button id="dark-mode-toggle" class="btn btn-toggle">关</button>
                </div>
                
                <div class="control-group">
                    <button id="pause-btn" class="btn btn-warning">暂停</button>
                    <button id="exit-btn" class="btn btn-danger">退出</button>
                </div>
            </div>
            
            <div id="teleprompter-display" class="teleprompter-display">
                <div id="teleprompter-content" class="teleprompter-content">
                    <!-- Segments will be rendered here -->
                </div>
            </div>
            
            <div id="timer-display" class="timer-display">
                <span id="timer-value">--:--</span>
            </div>
        </div>
        
        <!-- Error Modal -->
        <div id="error-modal" class="modal hidden">
            <div class="modal-content">
                <h3>AI 模型错误</h3>
                <p id="error-modal-message">处理时发生错误，请尝试更换其他模型。</p>
                <div class="modal-buttons">
                    <button id="error-modal-close" class="btn btn-primary">确定</button>
                </div>
            </div>
        </div>
        
        <!-- Duration Edit Modal -->
        <div id="duration-modal" class="modal hidden">
            <div class="modal-content">
                <h3>修改时长</h3>
                <p id="duration-modal-text"></p>
                <div class="form-group">
                    <label for="duration-input">时长（毫秒）</label>
                    <input type="number" id="duration-input" min="100" step="100">
                </div>
                <div class="modal-buttons">
                    <button id="duration-modal-cancel" class="btn btn-secondary">取消</button>
                    <button id="duration-modal-save" class="btn btn-primary">保存</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="app.js"></script>
</body>
</html>
